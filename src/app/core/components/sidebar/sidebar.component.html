<!-- sidebar.component.html - Role-based navigation -->

<button class="sidebar-toggle" (click)="toggleSidebar()">
    <span>☰</span>
</button>

<!-- Sidebar Overlay (Mobile) -->
<div class="sidebar-overlay" (click)="toggleSidebar()"></div>

<!-- Sidebar -->
<div class="sidebar" id="sidebar">
    <!-- Header -->
    <div class="sidebar-header">
        <a href="#" class="sidebar-brand">
            <div class="brand-icon">📊</div>
            <span>ProjeYönetim</span>
        </a>
        <div class="user-profile-card" *ngIf="currentUser">
            <div class="user-avatar">
                {{ currentUser.firstName.charAt(0) }}{{ currentUser.lastName.charAt(0) }}
            </div>
            <div class="user-details">
                <div class="user-name">{{ currentUser.firstName }} {{ currentUser.lastName }}</div>
                <div class="user-position" *ngIf="currentUser.role">
                    {{ currentUser.role }}
                </div>
            </div>
        </div>
    </div>

    <!-- Navigation -->
    <nav class="sidebar-nav">

        <!-- Ana Menü - Sadece ProjectManager ve Admin görebilir -->
        <div class="nav-section" *ngIf="shouldShowMainMenu()">
            <div class="nav-section-title">Proje Yönetim</div>
            <ul>
                <li class="nav-item" *ngIf="canAccessProjects()">
                    <a routerLink="/projects" 
                       routerLinkActive="active" 
                       [routerLinkActiveOptions]="{exact: true}"
                       class="nav-link"
                       (click)="onNavClick()">
                        <span class="nav-icon">📂</span>
                        <span>Projeler</span>
                        <span class="nav-badge">12</span>
                    </a>
                </li>
                <li class="nav-item" *ngIf="canAccessProjects()">
                    <a routerLink="/projects/add" 
                       routerLinkActive="active" 
                       [routerLinkActiveOptions]="{exact: true}"
                       class="nav-link"
                       (click)="onNavClick()">
                        <span class="nav-icon">➕</span>
                        <span>Proje Ekle</span>
                    </a>
                </li>
                <!-- <li class="nav-item" *ngIf="isProjectManager()">
                    <a routerLink="/calendar" 
                       routerLinkActive="active" 
                       [routerLinkActiveOptions]="{exact: true}"
                       class="nav-link"
                       (click)="onNavClick()">
                        <span class="nav-icon">📅</span>
                        <span>Takvim</span>
                    </a>
                </li> -->
            </ul>
        </div>
        <div class="nav-section" *ngIf="shouldShowTasksMenu()">
            <div class="nav-section-title">Görevler</div>
            <ul>
                <li class="nav-item">
                    <a routerLink="/user-tasks" 
                       routerLinkActive="active" 
                       [routerLinkActiveOptions]="{exact: true}"
                       class="nav-link"
                       (click)="onNavClick()">
                        <span class="nav-icon">📝</span>
                        <span>Görevlerim</span>
                        <span class="nav-badge warning">48</span>
                    </a>
                </li>
            </ul>
        </div>

        <div class="nav-section" *ngIf="shouldShowManagementMenu()">
            <div class="nav-section-title">Yönetim</div>
            <ul>
                <li class="nav-item" *ngIf="canAccessTeamManagement()">
                    <a routerLink="/team-management" 
                       routerLinkActive="active" 
                       [routerLinkActiveOptions]="{exact: true}"
                       class="nav-link"
                       (click)="onNavClick()">
                        <span class="nav-icon">👥</span>
                        <span>Takım Görev Yönetimi</span>
                        <span class="nav-badge success">8</span>
                    </a>
                </li>
                <li class="nav-item" *ngIf="canAccessUserManagement()">
                    <a routerLink="/users" 
                       routerLinkActive="active" 
                       [routerLinkActiveOptions]="{exact: true}"
                       class="nav-link"
                       (click)="onNavClick()">
                        <span class="nav-icon">👤</span>
                        <span>Kullanıcılar</span>
                    </a>
                </li>
                <!-- <li class="nav-item" *ngIf="canAccessReports()">
                    <a routerLink="/reports" 
                       routerLinkActive="active" 
                       [routerLinkActiveOptions]="{exact: true}"
                       class="nav-link"
                       (click)="onNavClick()">
                        <span class="nav-icon">📊</span>
                        <span>Raporlar</span>
                    </a>
                </li> -->
            </ul>
        </div>

        <!-- Araçlar - Herkese görünür -->
        <div class="nav-section" *ngIf="shouldShowToolsMenu()">
            <div class="nav-section-title">Araçlar</div>
            <ul>
                <li class="nav-item">
                    <a href="#" 
                       class="nav-link logout-link"
                       (click)="onLogout($event)">
                        <span class="nav-icon">🚪</span>
                        <span>Çıkış Yap</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a routerLink="/files" 
                       routerLinkActive="active" 
                       [routerLinkActiveOptions]="{exact: true}"
                       class="nav-link"
                       (click)="onNavClick()">
                        <span class="nav-icon">📁</span>
                        <span>Dosyalar</span>
                    </a>
                </li>
            </ul>
        </div>
    </nav>
</div>