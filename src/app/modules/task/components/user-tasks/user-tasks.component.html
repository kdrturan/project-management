<div class="my-tasks-container">
  
  <!-- Header -->
  <div class="page-header">
    <div class="header-info">
      <h1>GÃ¶revlerim</h1>
      <p *ngIf="currentUser">Merhaba {{ currentUser.firstName }} {{ currentUser.lastName }}, size atanan gÃ¶revleri buradan takip edebilirsiniz</p>
    </div>
  </div>

  <!-- Stats Dashboard -->
  <div class="stats-grid">
    <div class="stat-card total">
      <div class="stat-icon">ğŸ“Š</div>
      <div class="stat-info">
        <div class="stat-number">{{ stats.total }}</div>
        <div class="stat-label">Toplam GÃ¶rev</div>
      </div>
    </div>
    
    <div class="stat-card todo">
      <div class="stat-icon">ğŸ“‹</div>
      <div class="stat-info">
        <div class="stat-number">{{ stats.todo }}</div>
        <div class="stat-label">YapÄ±lacak</div>
      </div>
    </div>
    
    <div class="stat-card progress">
      <div class="stat-icon">âš¡</div>
      <div class="stat-info">
        <div class="stat-number">{{ stats.inProgress }}</div>
        <div class="stat-label">Devam Eden</div>
      </div>
    </div>
    
    <div class="stat-card review">
      <div class="stat-icon">ğŸ”</div>
      <div class="stat-info">
        <div class="stat-number">{{ stats.inReview }}</div>
        <div class="stat-label">Ä°nceleme</div>
      </div>
    </div>
    
    <div class="stat-card blocked">
      <div class="stat-icon">ğŸš«</div>
      <div class="stat-info">
        <div class="stat-number">{{ stats.blocked }}</div>
        <div class="stat-label">Engelli</div>
      </div>
    </div>
    
    <div class="stat-card done">
      <div class="stat-icon">âœ…</div>
      <div class="stat-info">
        <div class="stat-number">{{ stats.done }}</div>
        <div class="stat-label">Tamamlanan</div>
      </div>
    </div>
  </div>

  <!-- Filters -->
  <div class="filters-section">
    <div class="filter-group">
      <label>Durum Filtresi:</label>
      <select [(ngModel)]="statusFilter" class="filter-select">
        <option value="all">TÃ¼mÃ¼</option>
        <option value="To Do">YapÄ±lacak</option>
        <option value="In Progress">Devam Eden</option>
        <option value="In Review/Test">Ä°nceleme/Test</option>
        <option value="Blocked">Engelli</option>
        <option value="Done">Tamamlanan</option>
      </select>
    </div>
    
    <div class="filter-group">
      <label>Ã–ncelik Filtresi:</label>
      <select [(ngModel)]="priorityFilter" class="filter-select">
        <option value="all">TÃ¼mÃ¼</option>
        <option value="DÃ¼ÅŸÃ¼k">DÃ¼ÅŸÃ¼k</option>
        <option value="Orta">Orta</option>
        <option value="YÃ¼ksek">YÃ¼ksek</option>
        <option value="Kritik">Kritik</option>
      </select>
    </div>
  </div>

  <!-- Tasks List -->
  <div class="tasks-section">
    <div class="section-header">
      <h2>GÃ¶rev Listesi</h2>
      <span class="task-count">{{ getFilteredTasks().length }} gÃ¶rev</span>
    </div>
    
    <div class="tasks-grid">
      <div *ngFor="let task of getFilteredTasks()" class="task-card" 
           [class.overdue]="isOverdue(task)"
           [class.completed]="task.status === 'Done'">
        
        <div class="task-content">
          <!-- Task Header -->
          <div class="task-header">
            <h3 class="task-title">{{ task.title }}</h3>
            <div class="task-badges">
              <span class="status-badge" 
                    [style.background-color]="getStatusColor(task.status)">
                {{ task.status }}
              </span>
              <span class="priority-badge" 
                    [style.background-color]="getPriorityColor(task.priority)">
                {{ task.priority }}
              </span>
              <span *ngIf="isOverdue(task)" class="overdue-badge">
                GecikmiÅŸ
              </span>
            </div>
          </div>

          <!-- Task Description -->
          <div class="task-description">{{ task.description }}</div>

          <!-- Task Progress -->
          <div class="task-progress" *ngIf="task.estimatedEffort">
            <div class="progress-info">
              <span>Ä°lerleme: {{ task.actualEffort || 0 }}/{{ task.estimatedEffort }} saat</span>
              <span class="progress-percentage">{{ getProgressPercentage(task) }}%</span>
            </div>
            <div class="progress-bar">
              <div class="progress-fill" [style.width.%]="getProgressPercentage(task)"></div>
            </div>
          </div>

          <!-- Task Meta Info -->
          <div class="task-meta">
            <div class="meta-row">
              <div class="meta-item">
                <span class="meta-label">Proje:</span>
                <span class="meta-value">{{ task.projectName }}</span>
              </div>
              <div class="meta-item">
                <span class="meta-label">Ä°ÅŸ Paketi:</span>
                <span class="meta-value">{{ task.workPackageName }}</span>
              </div>
            </div>
            
            <div class="meta-row">
              <div class="meta-item">
                <span class="meta-label">BaÅŸlama:</span>
                <span class="meta-value">{{ formatDate(task.actualStartDate || task.plannedStartDate) }}</span>
              </div>
              <div class="meta-item">
                <span class="meta-label">BitiÅŸ:</span>
                <span class="meta-value">{{ formatDate(task.plannedEndDate) }}</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Task Actions -->
        <div class="task-actions">
          <div class="status-update">
            <label>Durum GÃ¼ncelle:</label>
            <select [(ngModel)]="task.status" 
                    (ngModelChange)="updateTaskStatus(task, $event)"
                    class="status-select">
              <option value="To Do">YapÄ±lacak</option>
              <option value="In Progress">Devam Eden</option>
              <option value="In Review/Test">Ä°nceleme/Test</option>
              <option value="Blocked">Engelli</option>
              <option value="Done">Tamamlanan</option>
            </select>
          </div>
        </div>

      </div>
      
      <!-- Empty State -->
      <div *ngIf="getFilteredTasks().length === 0" class="empty-state">
        <div class="empty-icon">ğŸ“</div>
        <h3>GÃ¶rev bulunamadÄ±</h3>
        <p *ngIf="statusFilter !== 'all' || priorityFilter !== 'all'">
          SeÃ§ilen filtrelere uygun gÃ¶rev bulunmuyor.
        </p>
        <p *ngIf="statusFilter === 'all' && priorityFilter === 'all'">
          HenÃ¼z size atanmÄ±ÅŸ gÃ¶rev bulunmuyor.
        </p>
      </div>
    </div>
  </div>

</div>