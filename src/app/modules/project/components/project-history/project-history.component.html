<div class="main-content">
  <div class="container">
    <!-- Header Section -->
    <!-- <div class="header">
      <div class="header-content">
        <div class="header-left">
          <h1>{{ project?.name || 'Proje Detaylarƒ±' }}</h1>
          <div class="project-meta">
            <span class="status-badge" [class]="'status-' + project?.status?.toLowerCase()">
              {{ project?.status || 'Durum Belirtilmemi≈ü' }}
            </span>
            <span class="priority-badge">
              {{ getPriorityLabel() }}
            </span>
          </div>
        </div>
        <div class="header-actions">
          <button class="btn btn-secondary" (click)="goBack()">
            ‚Üê Geri D√∂n
          </button>
          <button class="btn btn-outline" (click)="copyProjectInfo()" *ngIf="!isEditMode">
            üìã Kopyala
          </button>
          <button class="btn btn-primary" (click)="toggleEditMode()" [disabled]="isLoading">
            <span *ngIf="isEditMode">‚ùå ƒ∞ptal Et</span>
            <span *ngIf="!isEditMode">‚úèÔ∏è D√ºzenle</span>
          </button>
          <button class="btn btn-danger" (click)="deleteProject()" *ngIf="!isEditMode" [disabled]="isLoading">
            üóëÔ∏è Sil
          </button>
        </div>
      </div>
    </div> -->

    <form [formGroup]="projectForm" (ngSubmit)="onSave()">
      <div class="content">
        <!-- Sol Panel - Proje Bilgileri -->
        <div class="detail-section">
          <div class="section-card">
            <h2>Proje Bilgileri</h2>
            
            <div class="form-group">
              <label>Proje Adƒ±</label>
              <input 
                type="text" 
                formControlName="name" 
                class="form-control" 
                [readonly]="!isEditMode"
                placeholder="Proje adƒ±nƒ± girin">
            </div>

            <div class="form-group">
              <label>Proje A√ßƒ±klamasƒ±</label>
              <textarea 
                formControlName="description" 
                class="form-control" 
                rows="4" 
                [readonly]="!isEditMode"
                placeholder="Proje a√ßƒ±klamasƒ±nƒ± girin..."></textarea>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label>Ba≈ülangƒ±√ß Tarihi</label>
                <input 
                  type="date" 
                  formControlName="plannedStartDate" 
                  class="form-control"
                  [readonly]="!isEditMode">
              </div>
              <div class="form-group">
                <label>Biti≈ü Tarihi</label>
                <input 
                  type="date" 
                  formControlName="plannedEndDate" 
                  class="form-control"
                  [readonly]="!isEditMode">
              </div>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label>√ñncelik Seviyesi</label>
                <!-- Edit mode'da select -->
                <select 
                  *ngIf="isEditMode"
                  formControlName="priority" 
                  class="form-control">
                  <option *ngFor="let priority of priorities" [value]="priority.value">
                    {{ priority.label }}
                  </option>
                </select>
                <!-- Read-only mode'da input -->
                <input 
                  *ngIf="!isEditMode"
                  type="text" 
                  class="form-control" 
                  [value]="getPriorityLabel()"
                  readonly>
              </div>
              <div class="form-group">
                <label>Durum</label>
                <!-- Edit mode'da select -->
                <select 
                  *ngIf="isEditMode"
                  formControlName="status" 
                  class="form-control">
                  <option *ngFor="let status of statuses" [value]="status.value">
                    {{ status.label }}
                  </option>
                </select>
                <!-- Read-only mode'da input -->
                <input 
                  *ngIf="!isEditMode"
                  type="text" 
                  class="form-control" 
                  [value]="getStatusLabel()"
                  readonly>
              </div>
            </div>

            <div class="form-group">
              <label>B√ºt√ße (‚Ç∫)</label>
              <input 
                type="number" 
                formControlName="budget" 
                class="form-control" 
                [readonly]="!isEditMode"
                placeholder="0.00">
            </div>

            <div class="form-group">
              <label>Proje Y√∂neticisi</label>
              <input 
                type="text" 
                [value]="project?.projectManagerName || 'Atanmamƒ±≈ü'"
                class="form-control" 
                readonly>
            </div>
          </div>

          <!-- Proje Dosyalarƒ± -->
          <div class="section-card">
            <div class="section-header">
              <h2>Proje Dosyalarƒ±</h2>
              <button 
                type="button" 
                class="btn btn-outline" 
                (click)="fileInput.click()"
                *ngIf="isEditMode">
                üìé Dosya Ekle
              </button>
            </div>

            <input 
              #fileInput 
              type="file" 
              multiple 
              accept=".pdf,.doc,.docx,.xls,.xlsx,.png,.jpg,.jpeg" 
              style="display: none;" 
              (change)="onFileSelected($event)">

    

            <!-- Mevcut Dosyalar -->
            <div class="file-section" *ngIf="projectFiles.length > 0">
              <h4>Mevcut Dosyalar</h4>
              <div class="file-list">
                <div class="file-item" *ngFor="let file of projectFiles; let i = index">
                  <div class="file-info">
                    <span class="file-icon">{{ getFileIcon(file.originalFilename) }}</span>
                    <div class="file-details">
                      <div class="file-name">{{ file.originalFilename }}</div>
                      <div class="file-size">{{ formatFileSize(file.fileSizeBytes) }}</div>
                      <div class="file-date">{{ formatDate(file.createdAt) }}</div>
                    </div>
                  </div>
                  <div class="file-actions">
                    <button type="button" class="btn-icon" (click)="downloadFile(file)" title="ƒ∞ndir">
                      üì•
                    </button>
                    <button 
                      type="button" 
                      class="btn-icon delete" 
                      (click)="deleteFile(file, i)" 
                      *ngIf="isEditMode"
                      title="Sil">
                      üóëÔ∏è
                    </button>
                  </div>
                </div>
              </div>
            </div>

            <div class="empty-state" *ngIf="projectFiles.length === 0 && newFiles.length === 0">
              <div class="empty-icon">üìÅ</div>
              <p>Hen√ºz dosya eklenmemi≈ü</p>
            </div>
          </div>
        </div>

        <!-- Saƒü Panel - Proje ƒ∞statistikleri -->
        <div class="stats-section">
          <div class="stats-card">
            <h3>üìä Proje ƒ∞statistikleri</h3>
            
            <div class="stat-item">
              <span class="stat-label">Proje S√ºresi:</span>
              <span class="stat-value">{{ calculateDuration() }}</span>
            </div>
            
            <div class="stat-item">
              <span class="stat-label">Kalan S√ºre:</span>
              <span class="stat-value" [class]="getRemainingTimeClass()">
                {{ calculateRemainingTime() }}
              </span>
            </div>
            
            <div class="stat-item">
              <span class="stat-label">B√ºt√ße:</span>
              <span class="stat-value">{{ formatCurrency(projectForm.get('budget')?.value) }}</span>
            </div>
            
            <div class="stat-item">
              <span class="stat-label">Versiyon Numarasƒ±:</span>
              <span class="stat-value">{{ project.versionNumber }}</span>
            </div>

            <div class="stat-item">
              <span class="stat-label">Dosya Sayƒ±sƒ±:</span>
              <span class="stat-value">{{ projectFiles.length + newFiles.length }} dosya</span>
            </div>
            
            <div class="stat-item">
              <span class="stat-label">Olu≈üturma Tarihi:</span>
              <span class="stat-value">{{ formatDate(project?.createdAt) }}</span>
            </div>
            
            <div class="stat-item">
              <span class="stat-label">Son G√ºncelleme:</span>
              <span class="stat-value">{{ formatDate(project?.updatedAt) }}</span>
            </div>
          </div>

          <!-- Proje Ge√ßmi≈üi -->
          <!-- <div class="stats-card">
            <h3>üìã Proje Ge√ßmi≈üi</h3>
            <div class="activity-list">
              <div class="activity-item" (click)="routeHistory(historyItem.Id)" *ngFor="let historyItem of projectHistory">
                <div class="activity-icon">{{ getChangeIcon(historyItem.changeType) }}</div>
                <div class="activity-content">
                  <div class="activity-text">Projenin {{ historyItem.versionNumber }}. versiyonu</div>
                  <div class="activity-date">{{ formatDate(historyItem.updatedAt) }}</div>
                </div>
              </div>
            </div>
            <div class="empty-state" *ngIf="projectHistory.length === 0">
              <p>Hen√ºz deƒüi≈üiklik ge√ßmi≈üi bulunmuyor</p>
            </div>
          </div> -->
        </div>
      </div>

      <!-- Action Buttons -->
      <div class="action-buttons" *ngIf="isEditMode">
        <button type="button" class="btn btn-secondary" (click)="cancelEdit()">
          ƒ∞ptal Et
        </button>
        <button type="submit" class="btn btn-primary" [disabled]="!projectForm.valid || isLoading">
          <span *ngIf="isLoading">‚è≥ Kaydediliyor...</span>
          <span *ngIf="!isLoading">‚úì Deƒüi≈üiklikleri Kaydet</span>
        </button>
      </div>
    </form>
  </div>
</div>